{"ast":null,"code":"var _jsxFileName = \"/home/admin/Projects/Cod3/Multi-Frontend-Discogs-Helper/react-front/src/components/Releases/WantlistForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useAuthContext } from '../../AuthContext';\nimport { useDiscogs } from '../../utility/dataSource';\nimport { useApi } from '../../utility/backSource';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WantlistForm = props => {\n  _s();\n  const {\n    updateData: updateDiscogs\n  } = useDiscogs();\n  const {\n    postData: postToBackend\n  } = useApi();\n  const {\n    authState\n  } = useAuthContext();\n  const [wantlistData, setWantlistData] = useState({\n    notes: '',\n    rating: 0,\n    price_threshold: 0\n  });\n\n  // Add item to the Discogs wantlist\n  const addToDiscogsWantlist = async () => {\n    console.log(\"[WantlistForm][addToDiscogsWantlist]\");\n    try {\n      const endpoint = `/users/${authState.username}/wants/${props.id}`;\n      const data = {\n        notes: wantlistData.notes,\n        rating: wantlistData.rating,\n        price_threshold: wantlistData.price_threshold\n      };\n      const response = await updateDiscogs(endpoint, data); // Post to Discogs API\n      console.log(response);\n      return true;\n    } catch (error) {\n      console.error(\"Error adding to Discogs wantlist\");\n      return false;\n    }\n  };\n  const addToBackend = async () => {\n    console.log(\"[WantlistForm][addToBackend]\");\n    let recordResponse;\n    let backResponse;\n    try {\n      // Post the record data to the backend using useApi.postData\n      recordResponse = await postToBackend(`/api/records`, props.record);\n      console.log('Record Response:', recordResponse.data);\n\n      // Prepare data to send to the backend\n      const body = {\n        userId: authState.userId,\n        discogsId: Number(props.id),\n        rating: Number(wantlistData.rating),\n        notes: wantlistData.notes,\n        price_threshold: Number(wantlistData.price_threshold),\n        wishlist: 0\n      };\n      console.log('Backend Body:', body);\n\n      // Post to the backend system using useApi.postData\n      backResponse = await postToBackend(`/api/users/${authState.userId}/collection`, body);\n      console.log('Backend Response:', backResponse.data);\n      return true;\n    } catch (error) {\n      console.error('Error during backend request:', error);\n      return false;\n    }\n  };\n\n  // Handle button click to add item to both Discogs and backend\n  const handleWantlistClick = async () => {\n    if (!authState.username) {\n      alert(\"Sign in to use this feature.\");\n      return;\n    }\n    const discogsResponse = await addToDiscogsWantlist();\n    const backResponse = await addToBackend();\n    if (backResponse && discogsResponse) {\n      alert(\"Wantlist item added successfully.\");\n    } else {\n      alert(\"Not added successfully.\");\n    }\n  };\n\n  // Handle form changes for wantlist data\n  const handleWantlistChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setWantlistData(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleWantlistClick,\n      className: \"btn btn-primary w-100\",\n      children: \"Add To Wantlist\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Notes:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"notes\",\n          value: wantlistData.notes,\n          onChange: handleWantlistChange,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Rating (1-5):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"rating\",\n          min: \"1\",\n          max: \"5\",\n          value: wantlistData.rating,\n          onChange: handleWantlistChange,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Price Threshold:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"price_threshold\",\n          value: wantlistData.price_threshold,\n          onChange: handleWantlistChange,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n};\n_s(WantlistForm, \"X1gXh3KWGZyq1RW9wpeV+rxHFcU=\", false, function () {\n  return [useDiscogs, useApi, useAuthContext];\n});\n_c = WantlistForm;\nexport default WantlistForm;\nvar _c;\n$RefreshReg$(_c, \"WantlistForm\");","map":{"version":3,"names":["React","useState","useAuthContext","useDiscogs","useApi","jsxDEV","_jsxDEV","WantlistForm","props","_s","updateData","updateDiscogs","postData","postToBackend","authState","wantlistData","setWantlistData","notes","rating","price_threshold","addToDiscogsWantlist","console","log","endpoint","username","id","data","response","error","addToBackend","recordResponse","backResponse","record","body","userId","discogsId","Number","wishlist","handleWantlistClick","alert","discogsResponse","handleWantlistChange","e","name","value","target","prevState","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onChange","type","min","max","_c","$RefreshReg$"],"sources":["/home/admin/Projects/Cod3/Multi-Frontend-Discogs-Helper/react-front/src/components/Releases/WantlistForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuthContext } from '../../AuthContext';\nimport { useDiscogs } from '../../utility/dataSource'; \nimport { useApi } from '../../utility/backSource'; \n\nconst WantlistForm = (props) => {\n    const { updateData: updateDiscogs } = useDiscogs();\n    const { postData: postToBackend } = useApi(); \n    const { authState } = useAuthContext();\n    const [wantlistData, setWantlistData] = useState({\n        notes: '',\n        rating: 0,\n        price_threshold: 0,\n    });\n\n    // Add item to the Discogs wantlist\n    const addToDiscogsWantlist = async () => {\n        console.log(\"[WantlistForm][addToDiscogsWantlist]\");\n        try {\n            const endpoint = `/users/${authState.username}/wants/${props.id}`;\n            const data = {\n                notes: wantlistData.notes,\n                rating: wantlistData.rating,\n                price_threshold: wantlistData.price_threshold,\n            };\n            const response = await updateDiscogs(endpoint, data); // Post to Discogs API\n            console.log(response);\n            return true;\n        } catch (error) {\n            console.error(\"Error adding to Discogs wantlist\");\n            return false;\n        }\n    };\n\n    \n    const addToBackend = async () => {\n        console.log(\"[WantlistForm][addToBackend]\");\n\n        let recordResponse;\n        let backResponse;\n        try {\n            // Post the record data to the backend using useApi.postData\n            recordResponse = await postToBackend(`/api/records`, props.record); \n            console.log('Record Response:', recordResponse.data);\n\n            // Prepare data to send to the backend\n            const body = {\n                userId: authState.userId,\n                discogsId: Number(props.id),\n                rating: Number(wantlistData.rating),\n                notes: wantlistData.notes,\n                price_threshold: Number(wantlistData.price_threshold),\n                wishlist: 0,\n            };\n            console.log('Backend Body:', body);\n\n            // Post to the backend system using useApi.postData\n            backResponse = await postToBackend(`/api/users/${authState.userId}/collection`, body);\n            console.log('Backend Response:', backResponse.data);\n            return true;\n        } catch (error) {\n            console.error('Error during backend request:', error);\n            return false;\n        }\n    };\n\n    // Handle button click to add item to both Discogs and backend\n    const handleWantlistClick = async () => {\n        if (!authState.username) {\n            alert(\"Sign in to use this feature.\");\n            return;\n        }\n\n        const discogsResponse = await addToDiscogsWantlist();\n        const backResponse = await addToBackend();\n\n        if (backResponse && discogsResponse) {\n            alert(\"Wantlist item added successfully.\");\n        } else {\n            alert(\"Not added successfully.\");\n        }\n    };\n\n    // Handle form changes for wantlist data\n    const handleWantlistChange = (e) => {\n        const { name, value } = e.target;\n        setWantlistData((prevState) => ({\n            ...prevState,\n            [name]: value,\n        }));\n    };\n\n    return (\n        <div className='col-6'>\n            <button onClick={handleWantlistClick} className='btn btn-primary w-100'>\n                Add To Wantlist\n            </button>\n            <form>\n                <div>\n                    <label>Notes:</label>\n                    <textarea\n                        name=\"notes\"\n                        value={wantlistData.notes}\n                        onChange={handleWantlistChange}\n                        className=\"form-control\"\n                    />\n                </div>\n                <div>\n                    <label>Rating (1-5):</label>\n                    <input\n                        type=\"number\"\n                        name=\"rating\"\n                        min=\"1\"\n                        max=\"5\"\n                        value={wantlistData.rating}\n                        onChange={handleWantlistChange}\n                        className=\"form-control\"\n                    />\n                </div>\n                <div>\n                    <label>Price Threshold:</label>\n                    <input\n                        type=\"number\"\n                        name=\"price_threshold\"\n                        value={wantlistData.price_threshold}\n                        onChange={handleWantlistChange}\n                        className=\"form-control\"\n                    />\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default WantlistForm;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,cAAc,QAAQ,mBAAmB;AAClD,SAASC,UAAU,QAAQ,0BAA0B;AACrD,SAASC,MAAM,QAAQ,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElD,MAAMC,YAAY,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAC5B,MAAM;IAAEC,UAAU,EAAEC;EAAc,CAAC,GAAGR,UAAU,CAAC,CAAC;EAClD,MAAM;IAAES,QAAQ,EAAEC;EAAc,CAAC,GAAGT,MAAM,CAAC,CAAC;EAC5C,MAAM;IAAEU;EAAU,CAAC,GAAGZ,cAAc,CAAC,CAAC;EACtC,MAAM,CAACa,YAAY,EAAEC,eAAe,CAAC,GAAGf,QAAQ,CAAC;IAC7CgB,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE,CAAC;IACTC,eAAe,EAAE;EACrB,CAAC,CAAC;;EAEF;EACA,MAAMC,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACrCC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;IACnD,IAAI;MACA,MAAMC,QAAQ,GAAG,UAAUT,SAAS,CAACU,QAAQ,UAAUhB,KAAK,CAACiB,EAAE,EAAE;MACjE,MAAMC,IAAI,GAAG;QACTT,KAAK,EAAEF,YAAY,CAACE,KAAK;QACzBC,MAAM,EAAEH,YAAY,CAACG,MAAM;QAC3BC,eAAe,EAAEJ,YAAY,CAACI;MAClC,CAAC;MACD,MAAMQ,QAAQ,GAAG,MAAMhB,aAAa,CAACY,QAAQ,EAAEG,IAAI,CAAC,CAAC,CAAC;MACtDL,OAAO,CAACC,GAAG,CAACK,QAAQ,CAAC;MACrB,OAAO,IAAI;IACf,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZP,OAAO,CAACO,KAAK,CAAC,kCAAkC,CAAC;MACjD,OAAO,KAAK;IAChB;EACJ,CAAC;EAGD,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC7BR,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;IAE3C,IAAIQ,cAAc;IAClB,IAAIC,YAAY;IAChB,IAAI;MACA;MACAD,cAAc,GAAG,MAAMjB,aAAa,CAAC,cAAc,EAAEL,KAAK,CAACwB,MAAM,CAAC;MAClEX,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEQ,cAAc,CAACJ,IAAI,CAAC;;MAEpD;MACA,MAAMO,IAAI,GAAG;QACTC,MAAM,EAAEpB,SAAS,CAACoB,MAAM;QACxBC,SAAS,EAAEC,MAAM,CAAC5B,KAAK,CAACiB,EAAE,CAAC;QAC3BP,MAAM,EAAEkB,MAAM,CAACrB,YAAY,CAACG,MAAM,CAAC;QACnCD,KAAK,EAAEF,YAAY,CAACE,KAAK;QACzBE,eAAe,EAAEiB,MAAM,CAACrB,YAAY,CAACI,eAAe,CAAC;QACrDkB,QAAQ,EAAE;MACd,CAAC;MACDhB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEW,IAAI,CAAC;;MAElC;MACAF,YAAY,GAAG,MAAMlB,aAAa,CAAC,cAAcC,SAAS,CAACoB,MAAM,aAAa,EAAED,IAAI,CAAC;MACrFZ,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAES,YAAY,CAACL,IAAI,CAAC;MACnD,OAAO,IAAI;IACf,CAAC,CAAC,OAAOE,KAAK,EAAE;MACZP,OAAO,CAACO,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACrD,OAAO,KAAK;IAChB;EACJ,CAAC;;EAED;EACA,MAAMU,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAACxB,SAAS,CAACU,QAAQ,EAAE;MACrBe,KAAK,CAAC,8BAA8B,CAAC;MACrC;IACJ;IAEA,MAAMC,eAAe,GAAG,MAAMpB,oBAAoB,CAAC,CAAC;IACpD,MAAMW,YAAY,GAAG,MAAMF,YAAY,CAAC,CAAC;IAEzC,IAAIE,YAAY,IAAIS,eAAe,EAAE;MACjCD,KAAK,CAAC,mCAAmC,CAAC;IAC9C,CAAC,MAAM;MACHA,KAAK,CAAC,yBAAyB,CAAC;IACpC;EACJ,CAAC;;EAED;EACA,MAAME,oBAAoB,GAAIC,CAAC,IAAK;IAChC,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChC7B,eAAe,CAAE8B,SAAS,KAAM;MAC5B,GAAGA,SAAS;MACZ,CAACH,IAAI,GAAGC;IACZ,CAAC,CAAC,CAAC;EACP,CAAC;EAED,oBACItC,OAAA;IAAKyC,SAAS,EAAC,OAAO;IAAAC,QAAA,gBAClB1C,OAAA;MAAQ2C,OAAO,EAAEX,mBAAoB;MAACS,SAAS,EAAC,uBAAuB;MAAAC,QAAA,EAAC;IAExE;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eACT/C,OAAA;MAAA0C,QAAA,gBACI1C,OAAA;QAAA0C,QAAA,gBACI1C,OAAA;UAAA0C,QAAA,EAAO;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACrB/C,OAAA;UACIqC,IAAI,EAAC,OAAO;UACZC,KAAK,EAAE7B,YAAY,CAACE,KAAM;UAC1BqC,QAAQ,EAAEb,oBAAqB;UAC/BM,SAAS,EAAC;QAAc;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eACN/C,OAAA;QAAA0C,QAAA,gBACI1C,OAAA;UAAA0C,QAAA,EAAO;QAAa;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC5B/C,OAAA;UACIiD,IAAI,EAAC,QAAQ;UACbZ,IAAI,EAAC,QAAQ;UACba,GAAG,EAAC,GAAG;UACPC,GAAG,EAAC,GAAG;UACPb,KAAK,EAAE7B,YAAY,CAACG,MAAO;UAC3BoC,QAAQ,EAAEb,oBAAqB;UAC/BM,SAAS,EAAC;QAAc;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eACN/C,OAAA;QAAA0C,QAAA,gBACI1C,OAAA;UAAA0C,QAAA,EAAO;QAAgB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC/B/C,OAAA;UACIiD,IAAI,EAAC,QAAQ;UACbZ,IAAI,EAAC,iBAAiB;UACtBC,KAAK,EAAE7B,YAAY,CAACI,eAAgB;UACpCmC,QAAQ,EAAEb,oBAAqB;UAC/BM,SAAS,EAAC;QAAc;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEd,CAAC;AAAC5C,EAAA,CA/HIF,YAAY;EAAA,QACwBJ,UAAU,EACZC,MAAM,EACpBF,cAAc;AAAA;AAAAwD,EAAA,GAHlCnD,YAAY;AAiIlB,eAAeA,YAAY;AAAC,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}